import{d as A,z as D,c as g,b as e,w as a,h as i,x as c,r as n,o as y,g as p,t as _,a as V,l as z,_ as B}from"./index-BHCkwbks.js";const I={class:"history"},T={key:0},q=A({__name:"History",setup(H){const m=i("consult"),b=i([]),f=i([]),d=i(null),r=i(!1);function v(s){return s?new Date(s).toLocaleString("zh-CN"):""}async function h(){b.value=await c("/patient/consult/sessions")??[],f.value=await c("/patient/consult/prescriptions")??[]}async function C(s){d.value=await c(`/patient/consult/prescriptions/${s.id}`),r.value=!0}return D(h),(s,o)=>{const t=n("el-table-column"),u=n("el-table"),w=n("el-tab-pane"),N=n("el-button"),k=n("el-dialog"),x=n("el-tabs");return y(),g("div",I,[e(x,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=l=>m.value=l)},{default:a(()=>[e(w,{label:"人工咨询记录",name:"consult"},{default:a(()=>[e(u,{data:b.value,stripe:""},{default:a(()=>[e(t,{prop:"id",label:"会话ID",width:"100"}),e(t,{prop:"status",label:"状态",width:"120"}),e(t,{prop:"doctorName",label:"接诊医生"}),e(t,{prop:"createdAt",label:"创建时间",width:"180"},{default:a(({row:l})=>[p(_(v(l.createdAt)),1)]),_:1})]),_:1},8,["data"])]),_:1}),e(w,{label:"处方记录",name:"prescription"},{default:a(()=>[e(u,{data:f.value,stripe:""},{default:a(()=>[e(t,{prop:"id",label:"处方ID",width:"100"}),e(t,{prop:"diagnosis",label:"诊断","show-overflow-tooltip":""}),e(t,{prop:"createdAt",label:"开具时间",width:"180"},{default:a(({row:l})=>[p(_(v(l.createdAt)),1)]),_:1}),e(t,{label:"操作",width:"120"},{default:a(({row:l})=>[e(N,{link:"",type:"primary",onClick:S=>C(l)},{default:a(()=>[...o[2]||(o[2]=[p("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(k,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=l=>r.value=l),title:"处方详情",width:"560"},{default:a(()=>[d.value?(y(),g("div",T,[V("p",null,[o[3]||(o[3]=V("strong",null,"诊断：",-1)),p(_(d.value.diagnosis||"-"),1)]),e(u,{data:d.value.items,size:"small"},{default:a(()=>[e(t,{prop:"drugName",label:"药品"}),e(t,{prop:"spec",label:"规格"}),e(t,{prop:"quantity",label:"数量",width:"80"}),e(t,{prop:"dosage",label:"用法"}),e(t,{prop:"frequency",label:"频次"})]),_:1},8,["data"])])):z("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}}}),$=B(q,[["__scopeId","data-v-0339a813"]]);export{$ as default};
