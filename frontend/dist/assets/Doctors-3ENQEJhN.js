import{d as $,z as I,c as D,b as e,w as n,x as B,r as u,h as p,o as m,a as L,g as i,t as k,F as h,l as y,j as N,D as x,E as _,_ as O}from"./index-BHCkwbks.js";const T={class:"doctors"},M={class:"toolbar"},G=$({__name:"Doctors",setup(U){const c=p(""),g=p(1),f=p(10),E=p(0),b=p([]);function P(l){return{PENDING:"待审核",APPROVED:"已通过",REJECTED:"已驳回"}[l]??l}function w(l){return{NORMAL:"正常",DISABLED:"禁用",PENDING:"待审核"}[l]??l}async function r(){const l=new URLSearchParams;l.set("page",String(g.value-1)),l.set("size",String(f.value)),c.value&&l.set("auditStatus",c.value);const t=await B(`/admin/doctors?${l}`);b.value=(t==null?void 0:t.content)??[],E.value=(t==null?void 0:t.totalElements)??0}async function S(l,t){try{await x(`/admin/doctors/${l}/audit?status=${t}`),_.success("操作成功"),r()}catch(o){_.error((o==null?void 0:o.message)??"操作失败")}}async function C(l,t){try{await x(`/admin/doctors/${l}/status?status=${t}`),_.success("操作成功"),r()}catch(o){_.error((o==null?void 0:o.message)??"操作失败")}}return I(r),(l,t)=>{const o=u("el-option"),R=u("el-select"),d=u("el-button"),s=u("el-table-column"),V=u("el-table"),z=u("el-pagination"),A=u("el-card");return m(),D("div",T,[e(A,null,{default:n(()=>[L("div",M,[e(R,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),placeholder:"审核状态",clearable:"",style:{width:"140px"}},{default:n(()=>[e(o,{label:"待审核",value:"PENDING"}),e(o,{label:"已通过",value:"APPROVED"}),e(o,{label:"已驳回",value:"REJECTED"})]),_:1},8,["modelValue"]),e(d,{type:"primary",onClick:r},{default:n(()=>[...t[3]||(t[3]=[i("查询",-1)])]),_:1})]),e(V,{data:b.value,stripe:"",style:{"margin-top":"16px"}},{default:n(()=>[e(s,{prop:"username",label:"用户名",width:"120"}),e(s,{prop:"realName",label:"姓名",width:"100"}),e(s,{prop:"hospital",label:"医院","show-overflow-tooltip":""}),e(s,{prop:"department",label:"科室",width:"100"}),e(s,{prop:"auditStatus",label:"审核状态",width:"110"},{default:n(({row:a})=>[i(k(P(a.auditStatus)),1)]),_:1}),e(s,{prop:"userStatus",label:"账号状态",width:"110"},{default:n(({row:a})=>[i(k(w(a.userStatus)),1)]),_:1}),e(s,{prop:"consultCount",label:"接诊数",width:"90"}),e(s,{label:"操作",width:"180",fixed:"right"},{default:n(({row:a})=>[a.auditStatus==="PENDING"?(m(),D(h,{key:0},[e(d,{type:"success",link:"",onClick:v=>S(a.id,"APPROVED")},{default:n(()=>[...t[4]||(t[4]=[i("通过",-1)])]),_:1},8,["onClick"]),e(d,{type:"danger",link:"",onClick:v=>S(a.id,"REJECTED")},{default:n(()=>[...t[5]||(t[5]=[i("驳回",-1)])]),_:1},8,["onClick"])],64)):y("",!0),a.userStatus==="NORMAL"?(m(),N(d,{key:1,type:"warning",link:"",onClick:v=>C(a.id,"DISABLED")},{default:n(()=>[...t[6]||(t[6]=[i("禁用",-1)])]),_:1},8,["onClick"])):a.userStatus==="DISABLED"?(m(),N(d,{key:2,type:"success",link:"",onClick:v=>C(a.id,"NORMAL")},{default:n(()=>[...t[7]||(t[7]=[i("启用",-1)])]),_:1},8,["onClick"])):y("",!0)]),_:1})]),_:1},8,["data"]),e(z,{"current-page":g.value,"onUpdate:currentPage":t[1]||(t[1]=a=>g.value=a),"page-size":f.value,"onUpdate:pageSize":t[2]||(t[2]=a=>f.value=a),total:E.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",style:{"margin-top":"16px"},onCurrentChange:r,onSizeChange:r},null,8,["current-page","page-size","total"])]),_:1})])}}}),F=O(G,[["__scopeId","data-v-abf40e2f"]]);export{F as default};
