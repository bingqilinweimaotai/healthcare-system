import{d as V,z as B,c as I,b as l,w as n,x as M,r as o,h as r,o as v,a as R,f as T,g as i,t as g,j as x,D as U,E as C,_ as O}from"./index-CfQAt1pw.js";const $={class:"users"},P={class:"toolbar"},K=V({__name:"Users",setup(j){const d=r(""),c=r(""),m=r(1),_=r(10),b=r(0),y=r([]);function D(t){return{NORMAL:"正常",DISABLED:"禁用",PENDING:"待审核"}[t]??t}function N(t){return{PATIENT:"患者",DOCTOR:"医生",ADMIN:"管理员"}[t]??t}function S(t){return t?new Date(t).toLocaleString("zh-CN"):""}async function u(){const t=new URLSearchParams;t.set("page",String(m.value-1)),t.set("size",String(_.value)),d.value&&t.set("keyword",d.value),c.value&&t.set("status",c.value);const e=await M(`/admin/users?${t}`);y.value=(e==null?void 0:e.content)??[],b.value=(e==null?void 0:e.totalElements)??0}async function w(t,e){try{await U(`/admin/users/${t}/status?status=${e}`),C.success("操作成功"),u()}catch(p){C.error((p==null?void 0:p.message)??"操作失败")}}return B(u),(t,e)=>{const p=o("el-input"),k=o("el-option"),A=o("el-select"),f=o("el-button"),s=o("el-table-column"),h=o("el-table"),z=o("el-pagination"),E=o("el-card");return v(),I("div",$,[l(E,null,{default:n(()=>[R("div",P,[l(p,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),placeholder:"搜索用户名/手机号",clearable:"",style:{width:"200px"},onKeyup:T(u,["enter"])},null,8,["modelValue"]),l(A,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),placeholder:"状态",clearable:"",style:{width:"120px"}},{default:n(()=>[l(k,{label:"正常",value:"NORMAL"}),l(k,{label:"禁用",value:"DISABLED"})]),_:1},8,["modelValue"]),l(f,{type:"primary",onClick:u},{default:n(()=>[...e[4]||(e[4]=[i("查询",-1)])]),_:1})]),l(h,{data:y.value,stripe:"",style:{"margin-top":"16px"}},{default:n(()=>[l(s,{prop:"username",label:"用户名",width:"120"}),l(s,{prop:"nickname",label:"昵称",width:"120"}),l(s,{prop:"phone",label:"手机号",width:"140"}),l(s,{prop:"role",label:"角色",width:"100"},{default:n(({row:a})=>[i(g(N(a.role)),1)]),_:1}),l(s,{prop:"status",label:"状态",width:"100"},{default:n(({row:a})=>[i(g(D(a.status)),1)]),_:1}),l(s,{prop:"createdAt",label:"注册时间",width:"180"},{default:n(({row:a})=>[i(g(S(a.createdAt)),1)]),_:1}),l(s,{label:"操作",width:"160",fixed:"right"},{default:n(({row:a})=>[a.status==="NORMAL"?(v(),x(f,{key:0,type:"danger",link:"",onClick:L=>w(a.id,"DISABLED")},{default:n(()=>[...e[5]||(e[5]=[i("禁用",-1)])]),_:1},8,["onClick"])):(v(),x(f,{key:1,type:"success",link:"",onClick:L=>w(a.id,"NORMAL")},{default:n(()=>[...e[6]||(e[6]=[i("启用",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"]),l(z,{"current-page":m.value,"onUpdate:currentPage":e[2]||(e[2]=a=>m.value=a),"page-size":_.value,"onUpdate:pageSize":e[3]||(e[3]=a=>_.value=a),total:b.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",style:{"margin-top":"16px"},onCurrentChange:u,onSizeChange:u},null,8,["current-page","page-size","total"])]),_:1})])}}}),q=O(K,[["__scopeId","data-v-b5942693"]]);export{q as default};
