import{d as k,c as R,a as d,b as o,w as t,r as s,o as T,g as _,h as c,i as x,p as C,E as f,e as E,_ as N}from"./index-BHCkwbks.js";const z={class:"register-page"},q={class:"card"},B={class:"footer"},I=k({__name:"Register",setup(U){const g=E(),i=c(),n=c(!1),l=x({username:"",password:"",role:"PATIENT"}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]};async function v(){var u;await((u=i.value)==null?void 0:u.validate().catch(()=>{})),n.value=!0;try{await C("/auth/register",l),f.success("注册成功，请登录"),g.replace("/login")}catch(e){f.error((e==null?void 0:e.message)??"注册失败")}finally{n.value=!1}}return(u,e)=>{const p=s("el-input"),r=s("el-form-item"),m=s("el-option"),V=s("el-select"),b=s("el-button"),y=s("el-form"),h=s("router-link");return T(),R("div",z,[d("div",q,[e[5]||(e[5]=d("h1",null,"注册",-1)),o(y,{ref_key:"formRef",ref:i,model:l,rules:w,"label-width":"0",class:"form"},{default:t(()=>[o(r,{prop:"username"},{default:t(()=>[o(p,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=a=>l.username=a),placeholder:"用户名",size:"large"},null,8,["modelValue"])]),_:1}),o(r,{prop:"password"},{default:t(()=>[o(p,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=a=>l.password=a),type:"password",placeholder:"密码",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),o(r,{prop:"role"},{default:t(()=>[o(V,{modelValue:l.role,"onUpdate:modelValue":e[2]||(e[2]=a=>l.role=a),placeholder:"角色",size:"large",style:{width:"100%"}},{default:t(()=>[o(m,{label:"患者",value:"PATIENT"}),o(m,{label:"医生",value:"DOCTOR"})]),_:1},8,["modelValue"])]),_:1}),o(r,null,{default:t(()=>[o(b,{type:"primary",size:"large",loading:n.value,style:{width:"100%"},onClick:v},{default:t(()=>[...e[3]||(e[3]=[_("注册",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),d("div",B,[o(h,{to:"/login"},{default:t(()=>[...e[4]||(e[4]=[_("已有账号？去登录",-1)])]),_:1})])])])}}}),O=N(I,[["__scopeId","data-v-8f0c9b5a"]]);export{O as default};
