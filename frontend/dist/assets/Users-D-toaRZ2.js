import{d as V,z as E,c as B,b as a,w as n,x as U,r as o,h as r,o as f,a as M,f as I,g as i,t as k,j as x,D as R,E as C,_ as $}from"./index-BHCkwbks.js";const O={class:"users"},P={class:"toolbar"},T=V({__name:"Users",setup(K){const d=r(""),c=r(""),m=r(1),_=r(10),g=r(0),b=r([]);function S(l){return{NORMAL:"正常",DISABLED:"禁用",PENDING:"待审核"}[l]??l}function h(l){return l?new Date(l).toLocaleString("zh-CN"):""}async function u(){const l=new URLSearchParams;l.set("page",String(m.value-1)),l.set("size",String(_.value)),d.value&&l.set("keyword",d.value),c.value&&l.set("status",c.value);const e=await U(`/admin/users?${l}`);b.value=(e==null?void 0:e.content)??[],g.value=(e==null?void 0:e.totalElements)??0}async function y(l,e){try{await R(`/admin/users/${l}/status?status=${e}`),C.success("操作成功"),u()}catch(p){C.error((p==null?void 0:p.message)??"操作失败")}}return E(u),(l,e)=>{const p=o("el-input"),w=o("el-option"),z=o("el-select"),v=o("el-button"),s=o("el-table-column"),D=o("el-table"),N=o("el-pagination"),A=o("el-card");return f(),B("div",O,[a(A,null,{default:n(()=>[M("div",P,[a(p,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),placeholder:"搜索用户名/手机号",clearable:"",style:{width:"200px"},onKeyup:I(u,["enter"])},null,8,["modelValue"]),a(z,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),placeholder:"状态",clearable:"",style:{width:"120px"}},{default:n(()=>[a(w,{label:"正常",value:"NORMAL"}),a(w,{label:"禁用",value:"DISABLED"})]),_:1},8,["modelValue"]),a(v,{type:"primary",onClick:u},{default:n(()=>[...e[4]||(e[4]=[i("查询",-1)])]),_:1})]),a(D,{data:b.value,stripe:"",style:{"margin-top":"16px"}},{default:n(()=>[a(s,{prop:"username",label:"用户名",width:"120"}),a(s,{prop:"nickname",label:"昵称",width:"120"}),a(s,{prop:"phone",label:"手机号",width:"140"}),a(s,{prop:"role",label:"角色",width:"100"}),a(s,{prop:"status",label:"状态",width:"100"},{default:n(({row:t})=>[i(k(S(t.status)),1)]),_:1}),a(s,{prop:"createdAt",label:"注册时间",width:"180"},{default:n(({row:t})=>[i(k(h(t.createdAt)),1)]),_:1}),a(s,{label:"操作",width:"160",fixed:"right"},{default:n(({row:t})=>[t.status==="NORMAL"?(f(),x(v,{key:0,type:"danger",link:"",onClick:L=>y(t.id,"DISABLED")},{default:n(()=>[...e[5]||(e[5]=[i("禁用",-1)])]),_:1},8,["onClick"])):(f(),x(v,{key:1,type:"success",link:"",onClick:L=>y(t.id,"NORMAL")},{default:n(()=>[...e[6]||(e[6]=[i("启用",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"]),a(N,{"current-page":m.value,"onUpdate:currentPage":e[2]||(e[2]=t=>m.value=t),"page-size":_.value,"onUpdate:pageSize":e[3]||(e[3]=t=>_.value=t),total:g.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",style:{"margin-top":"16px"},onCurrentChange:u,onSizeChange:u},null,8,["current-page","page-size","total"])]),_:1})])}}}),G=$(T,[["__scopeId","data-v-aa75fdd7"]]);export{G as default};
